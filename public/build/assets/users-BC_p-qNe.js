import{j as e,K as H,r as g,m as N,L as y}from"./app-BAf7MyeK.js";import{A as w,a as I,b as $,c as z}from"./app-layout-DMvFreFI.js";import{c as k,a as h,S as B,b as P,B as j}from"./app-logo-icon-uaTO8ZXM.js";import{I as x}from"./input-CSBJ3zW9.js";import{D as S,b as T,g as U,c as D,e as E}from"./dialog-Chx4kQcq.js";import"./index-BWBb6BsY.js";import"./index-CdULyywL.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],q=k("SquarePen",V);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],O=k("Trash2",F);function K({className:l,...a}){return e.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:e.jsx("table",{"data-slot":"table",className:h("w-full caption-bottom text-sm",l),...a})})}function G({className:l,...a}){return e.jsx("thead",{"data-slot":"table-header",className:h("[&_tr]:border-b",l),...a})}function J({className:l,...a}){return e.jsx("tbody",{"data-slot":"table-body",className:h("[&_tr:last-child]:border-0",l),...a})}function v({className:l,...a}){return e.jsx("tr",{"data-slot":"table-row",className:h("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",l),...a})}function f({className:l,...a}){return e.jsx("th",{"data-slot":"table-head",className:h("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...a})}function u({className:l,...a}){return e.jsx("td",{"data-slot":"table-cell",className:h("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),...a})}function Q({className:l,...a}){return e.jsx("caption",{"data-slot":"table-caption",className:h("text-muted-foreground mt-4 text-sm",l),...a})}const W=P("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function X({className:l,variant:a,asChild:s=!1,...r}){const c=s?B:"span";return e.jsx(c,{"data-slot":"badge",className:h(W({variant:a}),l),...r})}const C=[{title:"Dashboard",href:"/dashboard"}];function Y({open:l,onOpenChange:a}){const{data:s,setData:r,post:c,processing:t,errors:n,reset:o}=N({name:"",email:"",role:"",password:""}),b=i=>{i.preventDefault(),c("/users",{onSuccess:()=>{a(!1),o()}})},p=()=>{a(!1),o()};return e.jsx(S,{open:l,onOpenChange:p,children:e.jsxs(T,{children:[e.jsx(U,{children:e.jsx(D,{children:"Create User"})}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Name"}),e.jsx(x,{value:s.name,onChange:i=>r("name",i.target.value),disabled:t}),n.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Email"}),e.jsx(x,{type:"email",value:s.email,onChange:i=>r("email",i.target.value),disabled:t}),n.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Role"}),e.jsx(x,{value:s.role,onChange:i=>r("role",i.target.value),disabled:t}),n.role&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.role})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Password"}),e.jsx(x,{type:"password",value:s.password,onChange:i=>r("password",i.target.value),disabled:t}),n.password&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:n.password})]}),e.jsxs(E,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:p,disabled:t,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:t,children:t?"Creating...":"Create"})]})]})]})})}function Z({open:l,onOpenChange:a,user:s}){const{data:r,setData:c,put:t,processing:n,errors:o,reset:b}=N({name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",role:(s==null?void 0:s.role)||""});React.useEffect(()=>{s&&c({name:s.name||"",email:s.email||"",role:s.role||""})},[s]);const p=m=>{m.preventDefault(),s&&t(`/users/${s.id}`,{onSuccess:()=>{a(!1),b()}})},i=()=>{a(!1),b()};return s?e.jsx(S,{open:l,onOpenChange:i,children:e.jsxs(T,{children:[e.jsx(U,{children:e.jsx(D,{children:"Edit User"})}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Name"}),e.jsx(x,{value:r.name,onChange:m=>c("name",m.target.value),disabled:n}),o.name&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:o.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Email"}),e.jsx(x,{type:"email",value:r.email,onChange:m=>c("email",m.target.value),disabled:n}),o.email&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:o.email})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Role"}),e.jsx(x,{value:r.role,onChange:m=>c("role",m.target.value),disabled:n}),o.role&&e.jsx("p",{className:"text-sm text-red-500 mt-1",children:o.role})]}),e.jsxs(E,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:i,disabled:n,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:n,children:n?"Saving...":"Save"})]})]})]})}):null}function ee({users:l,tenant:a,roleColors:s,onEdit:r,onDelete:c}){return e.jsxs(K,{children:[e.jsx(Q,{children:"A list of users in the tenant."}),e.jsx(G,{children:e.jsxs(v,{children:[e.jsx(f,{children:"#"}),e.jsx(f,{children:"Avatar"}),e.jsx(f,{children:"Tenant Name"}),e.jsx(f,{children:"Email"}),e.jsx(f,{children:"Role"}),e.jsx(f,{children:"Actions"})]})}),e.jsx(J,{children:l.length===0?e.jsx(v,{children:e.jsx(u,{colSpan:6,className:"text-center",children:"No users found."})}):l.map((t,n)=>{var o;return e.jsxs(v,{className:"hover:bg-muted/50",children:[e.jsx(u,{children:n+1}),e.jsx(u,{children:e.jsxs(I,{className:"h-8 w-8",children:[e.jsx($,{src:t.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name||t.email)}&background=random`,alt:t.name||t.email}),e.jsx(z,{children:t.name?a.name[0]:t.email[0]})]})}),e.jsx(u,{children:t.name||a.name||e.jsx("span",{className:"italic text-gray-400",children:"No name"})}),e.jsx(u,{children:t.email}),e.jsx(u,{children:e.jsx(X,{className:s[(o=t.role)==null?void 0:o.toLowerCase()]||s.default,children:t.role})}),e.jsx(u,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{size:"icon",variant:"ghost",title:"Edit user",onClick:()=>r(t),children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx(j,{size:"icon",variant:"ghost",title:"Delete user",onClick:()=>c(t),children:e.jsx(O,{className:"w-4 h-4 text-red-500"})})]})})]},t.id)})})]})}function oe({users:l,tenant:a}){const{auth:s}=H().props,[r,c]=g.useState(""),[t,n]=g.useState(null),[o,b]=g.useState(!1),[p,i]=g.useState(!1),{delete:m}=N();if(!a)return e.jsxs(w,{breadcrumbs:C,children:[e.jsx(y,{title:"Tenant Users"}),e.jsx("div",{className:"flex h-full flex-1 items-center justify-center",children:e.jsx("p",{className:"text-lg",children:"No tenant found. Please contact your administrator."})})]});const L=l.filter(d=>typeof d.email=="string"&&d.email.toLowerCase().includes(r.toLowerCase())||typeof d.name=="string"&&d.name.toLowerCase().includes(r.toLowerCase())||typeof a.name=="string"&&a.name.toLowerCase().includes(r.toLowerCase())),M={owner:"bg-blue-100 text-blue-800",manager:"bg-green-100 text-green-800",cashier:"bg-yellow-100 text-yellow-800",default:"bg-gray-100 text-gray-800"},A=d=>{n(d),b(!0)},R=d=>{window.confirm(`Are you sure you want to delete user ${d.email}?`)&&m(`/users/${d.id}`)},_=()=>{i(!0)};return e.jsxs(w,{breadcrumbs:C,children:[e.jsx(y,{title:"Tenant Users"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Tenant Users"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{type:"text",value:r,onChange:d=>c(d.target.value),placeholder:"Search by name or email...",className:"w-64"}),e.jsx(j,{onClick:_,children:"Create User"})]})]}),e.jsx(ee,{users:L,tenant:a,roleColors:M,onEdit:A,onDelete:R})]}),e.jsx(Z,{open:o,onOpenChange:b,user:t}),e.jsx(Y,{open:p,onOpenChange:i})]})}export{oe as default};
